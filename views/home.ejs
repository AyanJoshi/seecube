<div class="container" style="height: 100%; min-height: 300px;">
    <h1 class="mt-4">Dashboard</h1>
    <p class="lead mb-3">Welcome!</p>
    <hr>
    <br>
    <%if(currentUser && currentUser.userType.localeCompare("employer")!=0){%>
        <p class="lead" style="font-size:20px; overflow-wrap: break-word;">Profile: <a href="/users/<%= currentUser._id %>">
                <%=currentUser.name%>
            </a></p>
        <hr>
        
        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            
            <div class="card">
                <canvas id="pieChart" height="300%"></canvas>
            </div>
        </div>

        <hr>
    <%}%>
        <h4 class="mt-4">Help us improve our app by filling out this short form: </h3>
        <a href="https://bit.ly/2TnlB7w" class="btn btn-secondary">Fill out Survey</a>
        <br></br>
        <br></br>
</div>

<script>
    
    let ctx = document.getElementById('pieChart').getContext('2d');
    let labels = ['Solved', 'Un-solved'];
    let colorHex = ['#00CC00', '#CC0000'];

    let myChart = new Chart(ctx, {
    type: 'pie',
    data: {
        datasets: [{
        data: ['<%- solved %>', '<%- unsolved %>'],
        backgroundColor: colorHex
        }],
        labels: labels
    },
    options: {
        responsive: true,
        legend: {
            position: 'bottom'
        },
        plugins: {
        datalabels: {
            color: '#fff',
            anchor: 'end',
            align: 'start',
            offset: 10,
            borderWidth: 2,
            borderColor: '#fff',
            borderRadius: 25,
            backgroundColor: (context) => {
                return context.dataset.backgroundColor;
            },
            font: {
            weight: 'bold',
            size: '20'
            }
        }
        }
    }
    })
</script>